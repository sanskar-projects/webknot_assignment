<html>
<body>
<script>
var data={}
var i;
var n;
var correct_answer="";
var a=[];
var score=0;
var lock=false;

const fetchData=async()=>
{
i=0;
n=5;

var category=document.querySelector("#category").value;

const response=await fetch("https://opentdb.com/api.php?amount=5&category=${category}&type=multiple");
const _data= await response.json();
data={};
data=Object.assign({},data,_data);
display();
}

function display()
{

document.getElementById("q").innerHTML=(i+1)+") "+data.results[i].question;

correct_answer=data.results[i].correct_answer;

a=[];
a.push(data.results[i].correct_answer);
a.push(data.results[i].incorrect_answers[0]);
a.push(data.results[i].incorrect_answers[1]);
a.push(data.results[i].incorrect_answers[2]);
a=a.sort(()=>Math.random()-0.5);
document.getElementById("o1").innerHTML=a[0];
document.getElementById("r1").value=a[0];
document.getElementById("o2").innerHTML=a[1];
document.getElementById("r2").value=a[1];
document.getElementById("o3").innerHTML=a[2];
document.getElementById("r3").value=a[2];
document.getElementById("o4").innerHTML=a[3];
document.getElementById("r4").value=a[3];

}

function next()
{
if(i<n-1)
{
i+=1;
document.getElementById("r1").checked=false;
document.getElementById("r2").checked=false;
document.getElementById("r3").checked=false;
document.getElementById("r4").checked=false;

document.getElementById("o1").style.backgroundColor="white";
document.getElementById("o2").style.backgroundColor="white";
document.getElementById("o3").style.backgroundColor="white";
document.getElementById("o4").style.backgroundColor="white";

lock=false;
display();
}

else{result();}
}

function check()
{
if(lock==false)
{
var o1=document.getElementById("o1");
var o2=document.getElementById("o2");
var o3=document.getElementById("o3");
var o4=document.getElementById("o4");
var r1=document.getElementById("r1");
var r2=document.getElementById("r2");
var r3=document.getElementById("r3");
var r4=document.getElementById("r4");

input="";
if(r1.checked==true)
{
input=r1.value;
o1.style.backgroundColor="red";
}
if(r2.checked==true)
{
input=r2.value;
o2.style.backgroundColor="red";
}
if(r3.checked==true)
{
input=r3.value;
o3.style.backgroundColor="red";
}
if(r4.checked==true)
{
input=r4.value;
o4.style.backgroundColor="red";
}

if(r1.value==correct_answer){o1.style.backgroundColor="green";}
if(r2.value==correct_answer){o2.style.backgroundColor="green";}
if(r3.value==correct_answer){o3.style.backgroundColor="green";}
if(r4.value==correct_answer){o4.style.backgroundColor="green";}



if(input==correct_answer)
{
score+=1;
}

lock="true";
}
}

function result()
{
document.getElementById("score").innerHTML=score+"/"+n;
}

</script>
<select id="category">
<option value="">any</option><br>
<option value="9">GK</option><br>
<option value="10">books</option><br>
<option value="11"></option><br>
<option value="12"></option><br>
<option value="13"></option><br>
<option value="14"></option><br>
<option value="15"></option><br>
<option value="16"></option><br>
<option value="17"></option><br>
<option value="18"></option><br>
<option value="19"></option><br>
<option value="20"></option><br>
<option value="21"></option><br>
<option value="22"></option><br>
<option value="23"></option><br>
<option value="24"></option><br>
<option value="25"></option><br>
<option value="26"></option><br>
<option value="27"></option><br>
<option value="28"></option><br>
<option value="29"></option><br>
<option value="30"></option><br>
<option value="31"></option><br>
<option value="32"></option><br>
</select>


<span id="q"></span><br>

<span id="o1"></span><br>
<input type="radio" id="r1" name="r"><br>
<span id="o2"></span><br>
<input type="radio" id="r2" name="r"><br>
<span id="o3"></span><br>
<input type="radio" id="r3" name="r"><br>
<span id="o4"></span><br>
<input type="radio" id="r4" name="r"><br>

<button onclick="fetchData();">click</button>
<button onclick="check();">submit</button>
<button onclick="next();">next</button><br>

<span id="score"></span>
</body>
</html>
